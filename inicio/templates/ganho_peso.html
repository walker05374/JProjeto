{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Ganho de Peso Gestacional</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Bootstrap + Ícones -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- CSS personalizado com mesmo nome do HTML -->
  <link rel="stylesheet" href="{% static 'ganho_peso.css' %}">
</head>
<body style="background-image: url('{% static 'img/fundo_vacina.png' %}'); background-size: cover; background-repeat: no-repeat;">

  <!-- Botão Início no topo -->
  <div class="container mt-3 text-end">
    <a href="{% url 'site' %}" class="btn btn-outline-primary">
      <i class="fas fa-home"></i> Início
    </a>
  </div>

  <div class="container d-flex justify-content-center align-items-center flex-column my-5">
    <div class="row w-100 gap-4 justify-content-center">

      <!-- Gráfico à esquerda -->
      <div class="col-md-6">
        <div class="card shadow-lg p-4" style="background-color: #ffffffd8; border-radius: 20px;">
          <h5 class="text-center text-primary mb-3"><i class="fas fa-chart-line"></i> Gráfico de Peso Gestacional</h5>
          <div class="text-center">
            {% if ganho.grafico %}
              <img src="{{ ganho.grafico.url }}" alt="Gráfico de ganho de peso" class="img-fluid mb-3" style="max-height: 400px;">
            {% else %}
              <p class="text-muted">Nenhum gráfico disponível ainda.</p>
            {% endif %}
          </div>
          {% if ganho %}
          <div class="d-flex justify-content-between">
            <form method="post" action="{% url 'excluir_ganho' ganho.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger">
                <i class="fas fa-trash-alt"></i> Excluir
              </button>
            </form>
            <form method="post" action="{% url 'enviar_email_ganho' ganho.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary">
                <i class="fas fa-paper-plane"></i> Enviar por e-mail
              </button>
            </form>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Formulário à direita -->
      <div class="col-md-5">
        <div class="card shadow-lg p-4" style="background-color: #ffffffd8; border-radius: 20px;">
          <h5 class="text-center text-primary mb-3"><i class="fas fa-weight"></i> Inserir Dados</h5>
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="text-center">
              <button type="submit" class="btn btn-outline-dark">
                <i class="fas fa-plus-circle"></i> Inserir
              </button>
            </div>
          </form>
        </div>

        {% if ganho %}
        <div class="card mt-3 p-3" style="background-color: #ffffffd8; border-radius: 15px;">
          <h6 class="text-center text-primary"><i class="fas fa-info-circle"></i> Resultado:</h6>
          <p class="text-center">
            Seu IMC é <strong>{{ ganho.imc|floatformat:2 }}</strong> - <strong>{{ ganho.classificacao }}</strong>.<br>
            <span style="color: {% if ganho.classificacao == 'Eutrofia' %}green{% elif ganho.classificacao == 'Sobrepeso' %}orange{% else %}red{% endif %}; font-weight: bold;">
              {% if ganho.classificacao == 'Eutrofia' %}
                (Peso adequado para a gestação)
              {% elif ganho.classificacao == 'Sobrepeso' %}
                (Atenção! Ganho de peso acima do ideal)
              {% elif ganho.classificacao == 'Obesidade' %}
                (Risco aumentado – monitore com frequência)
              {% else %}
                (Ganho de peso abaixo do ideal – converse com seu profissional de saúde)
              {% endif %}
            </span>
          </p>
        </div>
        {% endif %}
      </div>

    </div>
  </div>

</body>
</html>
