{% load static %}


<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Ganho de Peso Gestacional</title>
    <link rel="stylesheet" href="{% static 'css/ganho_peso.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="background py-5">
  <div class="container">
    <div class="row">

      <!-- Lado esquerdo: formulário + resultado -->
      <div class="col-md-6 mb-4">
        <div class="card p-4">
          <h5 class="text-center text-primary mb-3">
            <i class="fas fa-weight"></i> Inserir Dados
          </h5>
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}

            <div class="text-center mt-3">
              <button type="submit" class="btn btn-outline-dark">
                <i class="fas fa-plus-circle"></i> Inserir
              </button>
            </div>
          </form>
        </div>

        {% if ganho %}
        <div class="card p-3 mt-3">
          <h6 class="text-center text-primary"><i class="fas fa-info-circle"></i> Resultado:</h6>
          <p class="text-center">
            Seu IMC é <strong>{{ ganho.imc|floatformat:2 }}</strong> -
            <strong>{{ ganho.classificacao }}</strong><br>
            <span style="color: {% if ganho.classificacao == 'Eutrofia' %}green{% elif ganho.classificacao == 'Sobrepeso' %}orange{% else %}red{% endif %}; font-weight: bold;">
              {% if ganho.classificacao == 'Baixo peso' %}
                A gestante deve ganhar entre 12,5kg a 18kg.
              {% elif ganho.classificacao == 'Eutrofia' %}
                A gestante deve ganhar entre 11,5kg a 16kg.
              {% elif ganho.classificacao == 'Sobrepeso' %}
                A gestante deve ganhar entre 7kg a 11,5kg.
              {% else %}
                A gestante deve ganhar entre 5kg a 9kg.
              {% endif %}
            </span>
          </p>
        </div>
        {% endif %}
      </div>

      <!-- Lado direito: gráfico + botões -->
      <div class="col-md-6 mb-4">
        {% if ganho and ganho.grafico %}
        <div class="card p-4 text-center">
          <h5 class="text-primary mb-3"><i class="fas fa-chart-line"></i> Gráfico de Peso</h5>
          <img src="{{ ganho.grafico.url }}" alt="Gráfico de ganho de peso" class="img-fluid mb-3" style="max-height: 400px; object-fit: contain;">
          <div class="d-flex justify-content-between">
            <form method="post" action="{% url 'excluir_ganho' ganho.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger">
                <i class="fas fa-trash-alt"></i> Excluir
              </button>
            </form>
            <form method="post" action="{% url 'enviar_email_ganho' ganho.id %}">
              {% csrf_token %}
              <input type="email" name="email" placeholder="Seu e-mail" class="form-control me-2 d-inline-block w-auto" required>
              <button type="submit" class="btn btn-outline-primary mt-2">
                <i class="fas fa-paper-plane"></i> Enviar por e-mail
              </button>
            </form>
          </div>
        </div>
        {% endif %}
      </div>

    </div>
  </div>
</div>
</body>
</html>
